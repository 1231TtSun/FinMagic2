{%extends "stock_prediction/stock_prediction_base.html" %}
{% block page_container %}
    <div class="row">
        <div class="col-1"></div>
        <div class="col-2">
            <div class="row">
               <div class="nav flex-column nav-pills nav-pills-tab" id="v-pills-tab" role="tablist"
                     aria-orientation="vertical">
                                        <a class="nav-link mb-2" href="{{url_for('stock_prediction.zycwzb')}} ">
                        主要财务指标</a>
                    <a class="nav-link mb-2"  href="{{url_for('stock_prediction.ylnl')}}">
                        盈利能力</a>
                    <a class="nav-link active show mb-2"
                       href="{{url_for('stock_prediction.chnl')}}" >
                        偿还能力</a>
                    <a class="nav-link mb-2"
                       href="{{url_for('stock_prediction.cznl')}}">
                        成长能力</a>
                    <a class="nav-link mb-2"
                       href="{{url_for('stock_prediction.yynl')}}" >
                        运营能力</a>
                     <li class="nav-link mb-2" id="v-pills-messages-tab" data-toggle="pill"
                       href="#v-pills-messages" role="tab" aria-controls="v-pills-messages"
                       aria-selected="false">
                        </li>
                    <a class="nav-link mb-2"  href="{{url_for('stock_prediction.lrbzy')}}">
                        利润表摘要</a>
                    <a class="nav-link mb-2"
                       href="{{url_for('stock_prediction.zcfzbzy')}}" >
                        资产负债表摘要</a>
                    <a class="nav-link mb-2"
                       href="{{url_for('stock_prediction.xjjlbzy')}}" >
                        现金流量表摘要</a>
                    <li class="nav-link mb-2" id="v-pills-messages-tab" data-toggle="pill"
                       href="#v-pills-messages" role="tab" aria-controls="v-pills-messages"
                       aria-selected="false">
                        </li>
                    <a class="nav-link mb-2"  href="{{url_for('stock_prediction.cwbg')}}">
                        财务报告</a>
                </div>
            </div> <!-- end row-->
        </div>
            <div class="col-8">
            <div class="row">
                <div class="col-8"></div>
                <div class="col-4">
                    <div height="100px">
                        <ul class="nav nav-pills navtab-bg nav-justified">
                            <li class="nav-item">
                                <a href="#profile1" data-toggle="tab" aria-expanded="true"
                                   class="nav-link active">按报告期</a>
                            </li>
                            <li class="nav-item">
                                <a href="#messages1" data-toggle="tab" aria-expanded="false" class="nav-link">按年度</a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane" id="home1"></div>
                            <div class="tab-pane show active" id="profile1"></div>
                            <div class="tab-pane" id="messages1"></div>
                        </div>
                    </div>

                </div>
            </div>
<div id="container" style="height: 700px;width: 100%;float: right"></div>
        </div>
    </div>

       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/simplex.js"></script>
       <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
       <script type="text/javascript">
var dom = document.getElementById("container");
var myChart = echarts.init(dom);
option = null;
$.ajax({
                        type: 'GET',
                        url: '{{url_for("stock_prediction.api_cwzb_chnl")}}',
                        data: {
                            'ts_code': '000001'
                        },
                        dataType: 'json',
                        success: function (data_1) {
                            option = {
                                title: {
                                    text: '平安银行（000001）-偿还能力走势图',
                                    subtext: '魔法金融\n'
                                },
                                 tooltip : {
                                    trigger: 'axis'
                                 },
                                grid:{
                                    top:"28%",
                                    bottom:"20%",
                                    left:"5%"
                                },
                                legend: [
                                    {
                                        x:'0%',
                                        y:'6%',
                                        align:'left',
                                        data:['流动比率（%）'],
                                        },
                                    {
            x:'33%',
            y:'6%',
            align:'left',
            data:['长期债务与营运资金比率（%）'],
              selected:{
                '长期债务与营运资金比率（%）':false
            }
        },
         {
            x:'66%',
            y:'6%',
            align:'left',
            data:['长期资产与长期资金比率（%）'],
             selected:{
                '长期资产与长期资金比率（%）':false
            }
        },
         {
            x:'0%',
            y:'9%',
            align:'left',
            data:['清算价值比率（%）'],
             selected:{
                '清算价值比率（%）':false
            }
        },
         {
            x:'33%',
            y:'9%',
            align:'left',
            data:['速动比率（%）'],
        },
         {
            x:'66%',
            y:'9%',
            align:'left',
            data:['股东权益比率（%）'],
             selected:{
                '股东权益比率（%）':false
            }
        },
         {
            x:'0%',
            y:'12%',
            align:'left',
            data:['资本化比率（%）'],
              selected:{
                '资本化比率（%）':false
            }
        },
         {
            x:'33%',
            y:'12%',
            align:'left',
            data:['固定资产比重（%）'],
              selected:{
                '固定资产比重（%）':false
            }
        },
         {
            x:'66%',
            y:'12%',
            align:'left',
            data:['现金比率（%）'],
             selected:{
                '现金比率（%）':false
            }
        },
          {
            x:'0%',
            y:'15%',
            align:'left',
            data:['长期负债比率（%）'],
              selected:{
                '长期负债比率（%）':false
            }
        },
         {
            x:'33%',
            y:'15%',
            align:'left',
            data:['固定资产净值率（%）'],
             selected:{
                '固定资产净值率（%）':false
            }
        },
         {
            x:'66%',
            y:'15%',
            align:'left',
            data:['利息支付倍数（%）'],
             selected:{
                '利息支付倍数（%）':false
            }
        },
        {
            x:'0%',
            y:'18%',
            align:'left',
            data:['股东权益与固定资产比率（%）'],
             selected:{
                '股东权益与固定资产比率（%）':false
            }
        },
         {
            x:'33%',
            y:'18%',
            align:'left',
            data:['资本固定化比率（%）'],
              selected:{
                '资本固定化比率（%）':false
            }

        },
         {
            x:'66%',
            y:'18%',
            align:'left',
            data:['资产负债率（%）'],
        },
        {
            x:'0%',
            y:'21%',
            align:'left',
            data:['负债与所有者权益比率（%）'],
            selected:{
                '负债与所有者权益比率（%）':false
            }
        },
                                     {
            x:'33%',
            y:'21%',
            align:'left',
            data:['产权比率（%）'],
            selected:{
                '产权比率（%）':false
            }
        }
                                    ],
                                toolbox: {
                                    show : true,
                                    feature : {
                                        magicType : {show: true, type: ['line', 'bar']},
                                        restore : {show: true},
                                        saveAsImage : {show: true}
                                    }
                                    },
                                calculable : true,
                                 xAxis : [
                                     {
                                         type : 'category',
                                         data : data_1['date'],
                                         axisLabel:{
                                             interval:0,
                                             rotate:270
                                         },
                                         textStyle:{
                                             fontSize:20
                                         }
                                     }
                                     ],
                                yAxis: {
                                    type: 'value'
                                },
                                 series : [
                                     {
                                         name:'流动比率（%）',
                                         type:'bar',
                                         data:data_1['ratio_current'],
                                     },
                                      {
            name:'长期债务与营运资金比率（%）',
            type:'bar',
            data:data_1['ratio_long_debts_working_captial'],
        },
         {
            name:'长期资产与长期资金比率（%）',
            type:'bar',
            data:data_1['ratio_long_assets_long_captial'],

        },
         {
            name:'清算价值比率（%）',
            type:'bar',
            data:data_1['ratio_liquidation_value'],

        },
         {
            name:'速动比率（%）',
            type:'bar',
            data:data_1['ratio_quick'],

        },
         {
            name:'股东权益比率（%）',
            type:'bar',
            data:data_1['ratio_sh_equity'],

        },
         {
            name:'资本化比率（%）',
            type:'bar',
            data:data_1['ratio_capitalization'],

        },
         {
            name:'固定资产比重（%）',
            type:'bar',
            data:data_1['ratio_share_equity'],

        },
         {
            name:'现金比率（%）',
            type:'bar',
            data:data_1['ratio_cash'],

        },
                                     {
            name:'长期负债比率（%）',
            type:'bar',
            data:data_1['ratio_long_debt'],

        },
                                     {
            name:'固定资产净值率（%）',
            type:'bar',
            data:data_1['ration_net_value_fixed_assets'],

        },
         {
            name:'利息支付倍数（%）',
            type:'bar',
            data:data_1['ratio_interest_coverage'],

        },
         {
            name:'股东权益与固定资产比率（%）',
            type:'bar',
            data:data_1['ration_sh_right_fixed_assets'],

        },
         {
            name:'资本固定化比率（%）',
            type:'bar',
            data:data_1['ratio_capital_immobilization'],

        },
        {
            name: '资产负债率（%）',
            type:'bar',
            data:data_1['ratio_asset_liability'],

        },
         {
            name:'负债与所有者权益比率（%）',
            type:'bar',
            data:data_1['ratio_debt_right'],

        },
                                     {
            name:'产权比率（%）',
            type:'bar',
            data:data_1['ratio_property_right'],

        },
                                 ]
                            };
                            myChart.setOption(option);
                        }
                    });
</script>

{% endblock %}